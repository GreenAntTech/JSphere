console.log("elementJS:","v1.0.0-preview.30");const appContext={server:!!globalThis.Deno,client:!globalThis.Deno,ctx:null};class Feature{featureFlags=[];constructor(flags){this.featureFlags=flags}async flag(obj){for(const prop in obj){let found=!1;const flags=prop.split(",");for(const flag of flags)if(this.featureFlags.includes(flag)||"default"==flag){await obj[prop](),found=!0;break}if(found)break}}}class RenderError extends Error{constructor(message){super(message),this.name="RenderError"}}function processEvent(event){try{let message;try{message=JSON.parse(event.data)}catch(e){return void(e&&console.warn("Received unparsable message:",event.data))}if(!isValidMessage(message))return void console.warn("Invalid message structure:",message);const subject=message.subject,data=message.data;let listenerFound=!1;if(!registeredAllowedOrigins.includes(event.origin))return void console.warn("Message origin not registered:",event.origin);registeredDeviceMessages[subject]&&(listenerFound=!0,window.webkit?window.webkit.messageHandlers.Device.postMessage(event.data):window.Device.postMessage(event.data)),registeredMessages[subject]&&(listenerFound=!0,registeredMessages[subject](data));const children=document.documentElement.querySelectorAll("[el-listening]");for(const childElement of children)childElement.listensFor$(subject)&&(listenerFound=!0,setTimeout(async()=>{await childElement.onMessageReceived$(subject,data)},0));listenerFound||console.warn(`No message listener was found for the subject '${subject}'`)}catch(e){console.warn("Failed to parse message:",e)}}function isValidMessage(data){return"object"==typeof data&&null!==data&&"subject"in data&&"string"==typeof data.subject}globalThis.addEventListener("message",processEvent,!1),globalThis.addEventListener("popstate",async()=>{const href=globalThis.location.href;for(const routePath in registeredRoutes){const route={path:routePath,handler:registeredRoutes[routePath]},pattern=new globalThis.URLPattern({pathname:route.path});if(pattern.test(href)){const params=pattern.exec(href).pathname.groups;let path="";params[0]&&(path=params[0],delete params[0]);const searchParams=new URLSearchParams(globalThis.location.search);for(const[key,value]of searchParams.entries())params[key]=value;await route.handler(path,params);break}}},!1);const appState=reactive({},{persist:!0,key:"appState"}),extendedURL={},feature=new Feature(getFeatureFlags()),registeredAllowedOrigins=[""],registeredCaptions={},registeredComponents={},registeredDependencies={},registeredServerDependencies={},registeredDeviceMessages={},registeredMessages={},registeredRoutes={},templateCache=new Map;let intersectionObserver;function createComponent(param1,param2){return"string"==typeof param1?(registeredComponents[param1]=param2,param1):(registeredComponents[param1.name]=param1,param1.name)}function deviceSubscribesTo(subject){registeredDeviceMessages[subject]=!0}function emitMessage(subject,data,target){if(void 0===target&&(target=window),void 0===data&&(data={}),"function"!=typeof target.postMessage)throw new Error("target: Must be a window object");target.postMessage(JSON.stringify({subject:subject,data:data}))}function navigateTo(path){if(void 0===path)globalThis.dispatchEvent(new Event("popstate"));else{if(path==globalThis.location.pathname)return;globalThis.history.pushState({},"",path),dispatchEvent(new Event("popstate"))}}function registerAllowedOrigin(uri){registeredAllowedOrigins.push(uri)}function registerCaptions(name,captions){registeredCaptions[name]=captions}function registerDependencies(dependencies){Object.assign(registeredDependencies,dependencies)}function registerRoute(path,handler){void 0!==path&&"string"==typeof path?"function"==typeof handler?registeredRoutes[path]=handler:console.warn("A valid hanlder must be specified when registering a route:",handler):console.warn("A path must be specified when registering a route:",path)}function registerServerDependencies(dependencies){Object.assign(registeredServerDependencies,dependencies)}function subscribeTo(subject,handler){registeredMessages[subject]=handler}function useCaptions(name){return(value,...args)=>{let caption=registeredCaptions[name][value]||value;if(args&&args.length>0)for(let i=0;i<args.length;i++)caption=caption.replaceAll("$"+(i+1),args[i]);return caption}}function reactive(state,config){const listeners=new Set;function makeReactive(obj){return new Proxy(obj,{set(target,key,value,receiver){"object"==typeof value&&null!==value&&(value=makeReactive(value));const result=Reflect.set(target,key,value,receiver);return listeners.forEach(listener=>listener()),result},get:(target,key,receiver)=>Array.isArray(target[key])?new Proxy(target[key],{set:(arrTarget,arrKey,arrValue)=>(arrTarget[arrKey]=arrValue,listeners.forEach(listener=>listener()),!0),get:(target,prop,receiver)=>"push"===prop?function(value){target.push(value),listeners.forEach(listener=>listener())}:"pop"===prop?function(){const value=target.pop();return listeners.forEach(listener=>listener()),value}:"shift"===prop?function(){const value=target.shift();return listeners.forEach(listener=>listener()),value}:"unshift"===prop?function(value){return target.unshift(value),listeners.forEach(listener=>listener()),value}:"splice"===prop?function(...values){target.splice(values[0],values[1],values[3]),listeners.forEach(listener=>listener())}:Reflect.get(target,prop,receiver)}):"object"==typeof target[key]&&null!==target[key]?makeReactive(target[key]):Reflect.get(target,key,receiver)})}const proxy=makeReactive(state);function watch(fn){listeners.add(fn),fn()}function computed(fn){let cachedValue,dirty=!0;const result={get value(){return dirty&&(cachedValue=fn(),dirty=!1),cachedValue}};return watch(()=>{dirty=!0}),result}function debounce(fn,delay){let timeout;return function(){clearTimeout(timeout),timeout=setTimeout(()=>fn(),delay)}}function throttle(fn,limit){let lastFn,lastRan;return(...args)=>{lastRan?(clearTimeout(lastFn),lastFn=setTimeout(()=>{Date.now()-lastRan>=limit&&(fn(...args),lastRan=Date.now())},limit-(Date.now()-lastRan))):(fn(...args),lastRan=Date.now())}}function watchEffect(fn,condition,{debounceTime:debounceTime=0,throttleTime:throttleTime=0}={}){let effect=fn;debounceTime&&(effect=debounce(fn,debounceTime)),throttleTime&&(effect=throttle(fn,throttleTime)),watch(()=>{condition()&&effect()})}function persistState(){localStorage.setItem(config.key,JSON.stringify(state))}function loadState(){const savedState=JSON.parse(localStorage.getItem(config.key)||"{}");savedState&&Object.assign(state,savedState)}return config&&config.persist&&config.key&&(loadState(),watch(persistState)),{proxy:proxy,watch:watch,computed:computed,watchEffect:watchEffect}}function runAt(props){appContext.server&&props.server?props.server():appContext.client&&props.client&&props.client()}async function renderDocument(config,ctx){try{if(config||(config={}),config.props||(config.props={}),validateInputs(config,ctx),appContext.ctx=ctx,appContext.server){setExtendedURL(ctx.request.url);const el=await getDocumentElement(config);el.setAttribute("el-is","document"),el.setAttribute("el-id","document"),initElementAsComponent(el),await el.init$(config.props);const components=el.querySelectorAll("[el-is]");for(const component of components)component.state$&&Object.keys(component.state$).length&&component.setAttribute("el-state",JSON.stringify(component.state$));return el.setAttribute("el-server-rendered","true"),el.outerHTML}{const el=document.documentElement;el.setAttribute("el-is","document"),el.setAttribute("el-id","document"),el.hasAttribute("el-server-rendered")||el.setAttribute("el-client-rendering","true"),initElementAsComponent(el);const params={},searchParams=new URLSearchParams(globalThis.location.search);for(const[key,value]of searchParams.entries())params[key]=value;return setExtendedURL(globalThis.location),setupIntersectionObserver(),await el.init$(config.props),el}}catch(e){throw console.error("Render error:",e),e}}function validateInputs(config,ctx){if(appContext.server){if(!config||"object"!=typeof config)throw new RenderError("Invalid config object provided");if(!ctx||"object"!=typeof ctx)throw new RenderError("Invalid server context object provided");if(!config.file&&!config.html)throw new RenderError("Either file path or HTML content must be provided")}}async function getDocumentElement(config){let html=config.html;if(!html&&config.file&&(html=await getResource(config.file),!html))throw console.error("Could not create document element - file not found: ",config.file),new RenderError("FileNotFound");return appContext.ctx.parser.parseFromString(html,"text/html").documentElement}function initElementAsComponent(el){const messageListeners={},hydrateOnComponents=[],stateObject={};let childComponents={},parent,hydrateOnCallback=()=>{};async function onInit(props){await el.onInit$(props),el.componentState$=1}async function onTemplate(props){let content;const template=el.template$(props);if(template&&template.startsWith("/")){const url=template;appContext.server?(templateCache.has(url)?(content=templateCache.get(url),console.log(`Loaded template from cache: ${url}`)):(content=await getResource(url)||"",void 0!==content&&templateCache.set(url,content)),el.innerHTML=sanitize(content)):(content=await getResource(url)||"",el.innerHTML=sanitize(content))}else template?(content=template,el.innerHTML=sanitize(content)):""==template&&(el.innerHTML=template);await getDependencies(el),el.initChildren$()}async function onRender(props){await el.onRender$(props),el.componentState$=2}async function onPostRender(){await getDependencies(el),el.initChildren$()}async function onHydrate(props){if(getServerState(el),el.hasAttribute("el-hydrate-on"))el.componentState$=3,el.ownerDocument.documentElement.hydrateOnComponents$.push({component:el,props:props});else{if(await el.onHydrate$(props),3==el.componentState$){el.removeAttribute("el-hydration-delayed");const components=el.querySelectorAll(":scope [el-hydration-delayed]");for(const component of components)component.removeAttribute("el-hydration-delayed")}el.componentState$=-1}}function onHydrateOn(state){const hydrateOnComponents=el.ownerDocument.documentElement.hydrateOnComponents$;if(0!=hydrateOnComponents.length){for(const entry of hydrateOnComponents){const component=entry.component,props=entry.props,hydrateOn=component.getAttribute("el-hydrate-on");component.removeAttribute("el-hydrate-on"),component.setAttribute("el-hydration-delayed",state);const components=el.querySelectorAll(":scope [el-component-state]");for(const child of components)child.setAttribute("el-hydration-delayed",state);if("idle"==hydrateOn||hydrateOn.startsWith("idle:")){const time=hydrateOn.startsWith("idle:")?parseInt(hydrateOn.substring(5)):0;time&&(component.hydrateOnCallback$=async()=>{await getDependencies(component),await component.init$(props)},globalThis.requestIdleCallback(component.hydrateOnCallback$,{timeout:time}))}else if("timeout"==hydrateOn||hydrateOn.startsWith("timeout:")){const time=hydrateOn.startsWith("timeout:")?parseInt(hydrateOn.substring(8)):500;component.hydrateOnCallback$=async()=>{await getDependencies(component),await component.init$(props)},setTimeout(component.hydrateOnCallback$,time)}else{if("visible"!=hydrateOn)throw new RenderError(`Invalid el-hydrate-on attribute value: ${hydrateOn}`);component.hydrateOnCallback$=async()=>{await getDependencies(component),await component.init$(props),intersectionObserver.unobserve(component)},intersectionObserver.observe(component)}}hydrateOnComponents.length=0}else{el.removeAttribute("el-component-state");const hydratedComponents=el.querySelectorAll(":scope [el-component-state]");for(const component of hydratedComponents)component.removeAttribute("el-component-state")}}el.init$||Object.defineProperties(el,{define$:{value:obj=>{const componentProps={};for(const prop in obj){if(!prop.endsWith("$"))throw new RenderError(`Invalid property name '${prop}'. Property names must end with a $.`);"function"==typeof obj[prop]?componentProps[prop]={value:obj[prop]}:componentProps[prop]=obj[prop]}Object.defineProperties(el,componentProps)}},init$:{value:async props=>{const docEl=el.ownerDocument.documentElement;if(appContext.server)return el.renderAtClient$?el.children$:(props=addPropsFromAttributes(el,props),addMissingLifecycleMethods(el),el.use$&&await loadDependencies(el.use$()),await onInit(props),await onTemplate(props),await onRender(props),el.children$);if(docEl.hasAttribute("el-server-rendered")){if(props=addPropsFromAttributes(el,props),addMissingLifecycleMethods(el),el.use$&&await loadDependencies(el.use$()),"document"==el.is$){await onPostRender(),await onHydrate(props),onHydrateOn("0"),docEl.removeAttribute("el-server-rendered");for(const id in el.children$)el.children$[id].onLoaded$(props)}else await onPostRender(),await onHydrate(props);return el.children$}return docEl.hasAttribute("el-client-rendering")?(props=addPropsFromAttributes(el,props),addMissingLifecycleMethods(el),el.use$&&await loadDependencies(el.use$()),await onInit(props),await onTemplate(props),await onRender(props),"document"==el.is$&&(docEl.removeAttribute("el-client-rendering"),docEl.setAttribute("el-client-hydrating","true"),await onHydrate(props),onHydrateOn("1"),docEl.removeAttribute("el-client-hydrating")),el.children$):docEl.hasAttribute("el-client-hydrating")?(props=addPropsFromAttributes(el,props),await onHydrate(props),el.children$):"0"==el.getAttribute("el-hydration-delayed")?(props=addPropsFromAttributes(el,props),2===el.componentState$?(await onPostRender(),await onHydrate(props)):3===el.componentState$&&await onHydrate(props),el.children$):["1","2"].includes(el.getAttribute("el-hydration-delayed"))?(props=addPropsFromAttributes(el,props),2===el.componentState$?await onHydrate(props):3===el.componentState$&&await onHydrate(props),el.children$):(props=addPropsFromAttributes(el,props),-1===el.componentState$&&(el.componentState$=0,addMissingLifecycleMethods(el),el.use$&&await loadDependencies(el.use$()),await onInit(props),await onTemplate(props),await onRender(props),await onHydrate(props),onHydrateOn("2")),0===el.componentState$?(addMissingLifecycleMethods(el),el.use$&&await loadDependencies(el.use$()),await onInit(props),await onTemplate(props),await onRender(props)):1===el.componentState$?(await onTemplate(props),await onRender(props)):2!==el.componentState$&&3!==el.componentState$||await onHydrate(props),el.children$)}},initChildren$:{value:()=>{let idCount=0,children;if(el.children$={},2===el.componentState$)children=el.querySelectorAll(`:scope [el-parent="${el.id$}"]`);else if("document"==el.id$){children=[];const head=el.querySelector("head"),body=el.querySelector("body");if(head)if(head.hasAttribute("el-is"))children.push(head);else{const components=head.querySelectorAll(":scope [el-is], [el-id]");for(const component of components)children.push(component)}if(body)if(body.hasAttribute("el-is"))children.push(body);else{const components=body.querySelectorAll(":scope [el-is], [el-id]");for(const component of components)children.push(component)}}else children=el.querySelectorAll(":scope [el-is], [el-id]");for(const childElement of children){childElement.getAttribute("el-id")||childElement.setAttribute("el-id",`component${idCount++}`),childElement.setAttribute("el-parent",el.getAttribute("el-id")),initElementAsComponent(childElement),childElement.parent$=el;const elId=childElement.id$;"component"!=childElement.is$&&2!==childElement.componentState$&&(childElement.componentState$=0),"list"==childElement.parent$.is$?(el.children$.items||(el.children$.items=[]),el.children$.items.push(childElement)):el.children$[elId]=childElement}}},id$:{get:()=>el.getAttribute("el-id")},is$:{get:()=>el.getAttribute("el-is")},index$:{get:()=>{const index=el.getAttribute("el-index");return index?Number(index):null}},children$:{get:()=>childComponents,set:value=>{childComponents=value}},componentState$:{set:value=>{-1===value?el.removeAttribute("el-component-state"):el.setAttribute("el-component-state",value.toString())},get:()=>{const value=el.getAttribute("el-component-state");return value?parseInt(value):-1}},emitMessage$:{value:async(subject,data)=>{if(registeredMessages[subject]){const response=await registeredMessages[subject](data||{});isValidMessage(response)&&await el.onMessageReceived$(response.subject,response.data)}else console.warn("Message not registered:",subject)}},hidden$:{set:value=>{if("boolean"==typeof value)if(value){let style=el.getAttribute("style");style||(style=""),style+="; display: none",el.setAttribute("style",style)}else{let style=el.getAttribute("style");style||(style=""),style=style.replaceAll("; display: none",""),el.setAttribute("style",style)}},get:()=>{let style=el.getAttribute("style");return style||(style=""),style.includes("display: none")}},hydrateOnCallback$:{set:value=>{hydrateOnCallback=value},get:()=>hydrateOnCallback},hydrateOnComponents$:{get:()=>hydrateOnComponents},onMessageReceived$:{value:async(subject,data)=>{messageListeners[subject]&&await messageListeners[subject](data)}},parent$:{set:value=>{parent=value},get:()=>parent||el.ownerDocument.documentElement},remove$:{value:()=>{delete el.parent$.children$[el.id$],el.parent$.removeChild(el)}},removeChild$:{value:childElement=>{delete el.children$[childElement.id$],el.removeChild(childElement)}},renderAtClient$:{get:()=>"client"===el.getAttribute("el-render-at")},listensFor$:{value:subject=>!!messageListeners[subject]},subscribeTo$:{value:(subject,handler)=>{messageListeners[subject]=async data=>{await handler(data)},el.setAttribute("el-listening","true")}},state$:{get:()=>stateObject},unsubscribeTo$:{value:subject=>{delete messageListeners[subject],0===Object.keys(messageListeners).length&&el.removeAttribute("el-listening")}}});const type=el.getAttribute("el-is")||"component";"component"==type&&el.setAttribute("el-is","component"),registeredComponents[type]?registeredComponents[type](el):console.warn(`The component type '${type}' is not registered.`)}function getServerState(el){if(el.hasAttribute("el-state")){const stateObject=JSON.parse(el.getAttribute("el-state")||"{}");Object.assign(el.state$,stateObject),el.removeAttribute("el-state")}}function addPropsFromAttributes(el,props){const attrs={};for(const attr of el.attributes)attr.name.startsWith("data-")&&(attrs[attr.name.substring(5)]=attr.value||!0);return props=Object.assign(attrs,props)}function addMissingLifecycleMethods(el){void 0===el.template$&&(el.template$=()=>{}),void 0===el.onInit$&&(el.onInit$=()=>{}),void 0===el.onRender$&&(el.onRender$=()=>{}),void 0===el.onHydrate$&&(el.onHydrate$=()=>{}),void 0===el.onLoaded$&&(el.onLoaded$=()=>{})}function sanitize(code){const sanitizedCode=code.replaceAll(/\?eTag=[a-zA-Z0-9:]+[\"]/g,'"').replaceAll(/\?eTag=[a-zA-Z0-9:]+[\']/g,"'");return sanitizedCode}function setupIntersectionObserver(){intersectionObserver=new IntersectionObserver(async entries=>{for(const entry of entries)entry.isIntersecting&&await entry.target.hydrateOnCallback$()},{rootMargin:"100px",threshold:0})}function setExtendedURL(url){const searchParams={};url.searchParams?url.searchParams.forEach((value,key)=>searchParams[key]=value):new URLSearchParams(url.search).forEach((value,key)=>searchParams[key]=value),extendedURL.hash=url.hash,extendedURL.host=url.host,extendedURL.hostname=url.hostname,extendedURL.href=url.href,extendedURL.origin=url.origin,extendedURL.port=url.port,extendedURL.protocol=url.protocol,extendedURL.search=url.search,extendedURL.searchParams=searchParams}async function getDependencies(el){const dependencies=[];let children;["component","document","link","list"].includes(el.getAttribute("el-is"))||dependencies.push(el.getAttribute("el-is")),children=2===el.componentState$?el.querySelectorAll(`:scope [el-parent="${el.id$}"]`):el.querySelectorAll(":scope [el-is]"),children.forEach(component=>{"component"!=component.getAttribute("el-is")&&(appContext.server&&"client"==component.getAttribute("el-render-at")||appContext.client&&"server"==component.getAttribute("el-render-at")||dependencies.push(component.getAttribute("el-is")))}),await loadDependencies(dependencies)}function getFeatureFlags(){if(appContext.client){const featureFlags=globalThis.document.cookie.split("; ").find(row=>row.startsWith("featureFlags="));if(featureFlags)return featureFlags.split("=")[1].split(":")}return[]}async function getResource(path){if(appContext.server){const file=await appContext.ctx.getPackageItem(path);if(file){const content=(new TextDecoder).decode(file.content);return content}}else{const response=await fetch(path);if(200===response.status){const content=await response.text();return content}}}async function importModule(url){try{if(appContext.server){const module=await import(url+`?eTag=${appContext.ctx.domain.hostname}:${appContext.ctx.domain.cacheDTS}`);return module}{const module=await import(url);return module}}catch(e){throw console.log(e),new RenderError(`Either the requested resource or one of its dependencies was not found: ${url}`)}}async function loadDependencies(dependencies){try{const imports=dependencies.map(dependency=>{if(!["component","document","link","list"].includes(dependency)){let modulePath=registeredDependencies[dependency];if(appContext.server&&(modulePath=registeredServerDependencies[dependency]||modulePath),modulePath)return importModule(modulePath);registeredComponents[dependency]||console.warn(`Dependency '${dependency}' not registered`)}});await Promise.allSettled(imports)}catch(e){throw console.error("Failed to load dependencies:",e),e}}!async function(){globalThis.URLPattern||await import("./urlpattern.min.js"),globalThis.location&&registerAllowedOrigin(globalThis.location.origin)}(),createComponent("document",el=>{el.define$({onRender$:async props=>{for(const id in el.children$){const child=el.children$[id];Array.isArray(child)?child.forEach(async child=>await child.init$(props)):await child.init$(props)}},onHydrate$:async props=>{for(const id in el.children$){const child=el.children$[id];Array.isArray(child)?child.forEach(async child=>await child.init$(props)):await child.init$(props)}}})}),createComponent("list",el=>{const tagNameMap={ul:"li",ol:"li",thead:"tr",tbody:"tr",body:"div",main:"div"};let idCount=0;el.define$({template$:_props=>"",onRender$:async props=>{let items=[];if(el.setAttribute("el-type",props.type),void 0===props.items)delete props.type,await el.add$(props,0),items.push(props);else if(Array.isArray(props.items)&&props.items.length>0){items=props.items,delete props.type,delete props.items;for(let i=0;i<items.length;i++){const newProps={...props,...items[i]};await el.add$(newProps,i)}}},onHydrate$:async props=>{"object"!=typeof props&&(props={});const items=el.children$.items||[];for(const child of items){const newProps={...props};await child.init$(newProps)}},add$:async(props,index=0)=>{const type=el.getAttribute("el-type"),tagName=tagNameMap[el.tagName.toLocaleLowerCase()]||el.tagName,component=el.ownerDocument.createElement(tagName);return component.setAttribute("el-is",type),component.setAttribute("el-id",`${type}${idCount++}`),component.setAttribute("el-parent",el.id$),component.setAttribute("el-index",index.toString()),await loadDependencies([type]),initElementAsComponent(component),component.parent$=el,component.componentState$=0,el.children$.items||(el.children$.items=[]),el.children$.items.push(component),el.append(component),await component.init$(props),component}})}),createComponent("component",el=>{el.define$({text$:{set:value=>{el.textContent=value},get:()=>el.textContent}})}),createComponent("link",el=>{let _onclick;el.define$({onRender$:props=>{void 0!==props.value&&(el.text$=props.value),"boolean"==typeof props.hidden&&(el.hidden$=props.hidden),el.disabled$=props.disabled||!1,el.href$=props.href},onHydrate$:props=>{const onclick=props.onclick||(()=>{});"function"==typeof onclick&&(el.removeEventListener("click",_onclick),_onclick=event=>{event.preventDefault(),el.disabled$||!1!==onclick(event)&&(el.href$?navigateTo(el.href$):el.getAttribute("href")&&(globalThis.location.href=el.getAttribute("href")))},el.addEventListener("click",_onclick))},disabled$:{set:value=>{"boolean"==typeof value&&(value?el.setAttribute("disabled",""):el.removeAttribute("disabled"))},get:()=>el.hasAttribute("disabled")},href$:{set:value=>{"string"==typeof value&&(el.setAttribute("data-href",value),el.setAttribute("href",value))},get:()=>el.getAttribute("data-href")},text$:{set:value=>{el.textContent=value},get:()=>el.textContent}})});export{appState as appState$,createComponent as createComponent$,deviceSubscribesTo as deviceSubscribesTo$,emitMessage as emitMessage$,extendedURL as url$,feature as feature$,useCaptions as useCaptions$,navigateTo as navigateTo$,reactive as reactive$,registerAllowedOrigin as registerAllowedOrigin$,registerCaptions as registerCaptions$,registerDependencies as registerDependencies$,registerServerDependencies as registerServerDependencies$,registerRoute as registerRoute$,renderDocument as renderDocument$,runAt as runAt$,subscribeTo as subscribeTo$};